@using Tirax.Application.WireMocker.Services
@using IViewLocator = Tirax.Application.WireMocker.Services.IViewLocator

@inject IViewLocator ViewLocator

@switch (state){
    case ViewState.Empty:
        break;

    case ViewState.InvalidModel:
        <MudText Typo="Typo.body2">Model @ViewModel.GetType().Name does not have a correct naming convention.</MudText>
        break;

    case ViewState.ViewTypeNotFound s:
        <MudText Typo="Typo.body2">View type @s.ViewTypeName not found.</MudText>
        break;

    case ViewState.View view:
        @view.Content
        break;

    default:
        <MudAlert Severity="Severity.Error">Unknown state</MudAlert>
        break;
}

@code {
    [Parameter, EditorRequired]
    public required ViewModel ViewModel { get; set; }

    ViewState state = ViewState.Empty.Instance;

    protected override void OnParametersSet() {
        state = ViewLocator.Locate(ViewModel);
        base.OnParametersSet();
    }
}