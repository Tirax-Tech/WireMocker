@inherits ReactiveComponentBase<SearchPanelViewModel>

<MudStack>
    <MudTextField T="string" @bind-Text="ViewModel!.ServiceSearchText" Immediate="true"
                  Variant="Variant.Outlined" Placeholder="Type a service name" Label="Search service" />

    @if (ViewModel!.CanNew){
        <MudButton StartIcon="@Icons.Material.Filled.Add" Variant="Variant.Filled" Color="Color.Primary" OnClick="@NewService">
            New service
        </MudButton>
    }

    <MudExpansionPanels>
        @foreach (var serviceView in ViewModel!.Services){
            <SearchViewItem ViewModel="serviceView" @key="serviceView.Service.Id" />
        }
    </MudExpansionPanels>
</MudStack>

@code {

    async Task NewService() {
        await ViewModel!.NewService.Execute(ViewModel!.ServiceSearchText);
    }

}