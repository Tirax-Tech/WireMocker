@using System.Reactive.Disposables

@inherits ReactiveComponentBase<ShellViewModel>

@inject ShellViewModel Shell

<MudDrawer Elevation="0" @bind-Open="ViewModel!.IsDrawerOpen">
    <MudNavMenu>
        <MudNavLink Href="/" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Home">Logs</MudNavLink>
        <MudNavLink Href="/services" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.DesignServices">Services</MudNavLink>
        <MudNavLink Href="/xport" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.DiscFull">Load/Save</MudNavLink>
    </MudNavMenu>
</MudDrawer>

@code {

    public NavMenu() {
        this.WhenActivated(disposables => {
            ViewModel.WhenAnyValue(x => x.IsDrawerOpen).Subscribe(_ => StateHasChanged()).DisposeWith(disposables);
        });
    }

    protected override void OnParametersSet() {
        ViewModel = Shell;
        base.OnParametersSet();
    }

}
